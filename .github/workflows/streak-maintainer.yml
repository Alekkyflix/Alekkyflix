name: Streak Maintainer

on:
  schedule:
    - cron: '0 12 * * *'  # Runs daily at 12:00 UTC
  workflow_dispatch:

jobs:
  streak:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 1  # Only latest commit needed

      - name: Configure Git
        run: |
          git config --global user.name "Alekkyflix Bot"
          git config --global user.email "120592887+Alekkyflix@users.noreply.github.com"

      - name: Human-like commits
        run: |
          # Skip 10% of days randomly
          if (( $RANDOM % 10 == 0 )); then
            echo "🔄 Skipping today for realism $(date)" >> skip_days.log
            git add skip_days.log
            git commit -m "⏭️ Skip day for natural pattern"
            git push origin $(git branch --show-current)
            exit 0
          fi

          # Weekend logic (Sat/Sun)
          if [ $(date +%u) -gt 5 ]; then
            echo "# Light weekend update $(date)" >> weekend_updates.md
            git add weekend_updates.md
            git commit -m "🌴 Weekend touch-up [skip ci]"
          else
            COMMITS=$(( RANDOM % 3 + 1 ))
            for ((i=1; i<=COMMITS; i++)); do
              echo "📌 Update $i/3 - $(date)" >> daily_logs/$(date +%Y-%m-%d).md
              git add .
              git commit -m "💼 Day $(date +%A) update $i/$COMMITS"
              sleep $(( RANDOM % 10 ))
            done
          fi

          # Push changes
          git push origin $(git branch --show-current)
